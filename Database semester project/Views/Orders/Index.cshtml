@model IEnumerable<Database_semester_project.Models.Orders>

@{
    ViewBag.Title = "Orders";
}


@if (ViewBag.Exception != null)
{
    @ViewBag.Exception
}

<h2>Orders</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table style="width:100%;  font-weight:normal; border:solid; border-color:black;">
    <tr style="border:1px">
        <th style="border:solid 1px">
            @Html.Raw("Order ID")
        </th>
        <th style="border:solid 1px">
            @Html.DisplayNameFor(model => model.Price)
        </th>
        <th style="border:solid 1px">
            @Html.DisplayNameFor(model => model.Delivery_price)
        </th>
        <th style="border:solid 1px">
            @Html.Raw("Customer")
        </th>
        <th style="border:solid 1px">
            @Html.Raw("Product")
        </th>
        <th style="border:solid 1px">
            @Html.Raw("Product quantity")
        </th>
        <th>
        </th>
    </tr>


    @foreach (var item in Model)
    {
        if (!item.Completed)
        {
    <tr style="border:1px">
        <td style="border:solid 1px">
            @Html.DisplayFor(modelItem => item.Id)
        </td>
        <td style="border:solid 1px">
            @Html.DisplayFor(modelItem => item.Price)
        </td>
        <td style="border:solid 1px">
            @Html.DisplayFor(modelItem => item.Delivery_price)
        </td>
        <td style="border:solid 1px">
            @Html.DisplayFor(modelItem => item.Customers.Name)
        </td>
        <td style="border:solid 1px">
            @Html.DisplayFor(modelItem => item.Products.Name)
        </td>
        <td style="border:solid 1px">
            @Html.DisplayFor(modelItem => item.Product_quantity)
        </td>
        <td style="border:solid 1px">
            @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
            @Html.ActionLink("Details", "Details", new { id = item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id = item.Id }) |
            @if (item.Products.Stored_amount > item.Product_quantity)
            {
                @Html.ActionLink("Complete", "Complete", new { id = item.Id })
            }
            else
            {
                @Html.Raw("Cannot complete order")
            }

        </td>
    </tr>
        }
    }

</table>
